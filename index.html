<head>
<script>
  window.fundraiseup_livemode = false;
</script>

<!-- Fundraise Up: the new standard for online giving -->
<script>(function(w,d,s,n,a){if(!w[n]){var l='call,catch,on,once,set,then,track'
.split(','),i,o=function(n){return'function'==typeof n?o.l.push([arguments])&&o
:function(){return o.l.push([n,arguments])&&o}},t=d.getElementsByTagName(s)[0],
j=d.createElement(s);j.async=!0;j.src='https://cdn.fundraiseup.com/widget/'+a;
t.parentNode.insertBefore(j,t);o.s=Date.now();o.v=4;o.h=w.location.href;o.l=[];
for(i=0;i<7;i++)o[l[i]]=o(l[i]);w[n]=o}
})(window,document,'script','FundraiseUp','AEMZUDUM');</script>
<!-- End Fundraise Up -->
  
<!-- Google tag (gtag.js) -->
<script async src="https://www.googletagmanager.com/gtag/js?id=G-J2ZLPBSK6D"></script>
<script>
  window.dataLayer = window.dataLayer || [];
  function gtag(){dataLayer.push(arguments);}
  gtag('js', new Date());

  gtag('config', 'G-J2ZLPBSK6D');
</script>

<script>
  const measurementId = "G-J2ZLPBSK6D";
  const googleApiSecret = "TUl1P7_6RCa742vp4ZUVAA";

  console.log("script reached");
  
  FundraiseUp.on('checkoutOpen', function(details) {
    console.log("checkoutOpen triggered");
    fetch(`https://www.google-analytics.com/mp/collect?measurement_id=${measurementId}&api_secret=${googleApiSecret}`, {
      method: "POST",
      body: JSON.stringify({
        events: [
          {
            name: "checkout_opened",
            params: { }
          }
        ]
      })
    });
    console.log("reached end of checkoutOpen handler");
  });
  
  FundraiseUp.on('donationComplete', function(details) {
    console.log("donationComplete triggered");
    let amount = details.donation.amount || 0;
    let currency = details.donation.currency || 'USD';
    
    fetch(`https://www.google-analytics.com/mp/collect?measurement_id=${measurementId}&api_secret=${googleApiSecret}`, {
      method: "POST",
      body: JSON.stringify({
        events: [
          {
            name: "donation_submitted",
            params: {
              "amount": amount,
              "currency": currency
            }
          }
        ]
      })
    });
    console.log("reached end of donationComplete handler");
  });
</script>
</head>

<body>
  <h1>Example site</h1>
  </br>
  <a href="#XJKDHSTQ" style="display: none"></a>
</body>
